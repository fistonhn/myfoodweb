(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[104],{4716:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/operation",function(){return a(6846)}])},4828:function(e,t,a){"use strict";a.d(t,{B:function(){return p}});var r=a(5893),s=a(66);a(7294);var n=a(9226),c=a(7645),l=a(8456),i=a(6514),o=a(1425),d=a(9368),u=a(1107),x=a(1780),h=a(1),m=a(1862);let p=()=>{let e=(0,s.TL)(),t=(0,s.CG)(e=>e.contractor),a=()=>{e((0,x.LG)())},d=()=>{e((0,x.g5)({categoryID:t.contractorCategoryID,contractorID:t.selectedToUpdateUserId}))},p=()=>{e((0,x.Dw)(t.contractorCategoryID))},N=async()=>{try{if(!t.contractorCategoryID)return alert("Kindly try again later.");await (0,m.xl)({categoryID:t.contractorCategoryID}),alert("Contractor removed successfully.")}catch(t){let e=(0,h.Y)(t);alert(e)}};return(0,r.jsxs)(n.Z,{maxWidth:"md",fullWidth:!0,onClose:a,open:t.showUpdateContractorModal,children:[(0,r.jsx)(c.Z,{children:"Edit Contractors"}),t.loadingContractors?(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)(l.Z,{})}):(0,r.jsxs)(i.Z,{children:[t.updatedSuccessfullyMessage&&(0,r.jsx)("h1",{className:"text-center font-bold text-green-600",children:t.updatedSuccessfullyMessage}),(0,r.jsx)("div",{children:t.contractors.length>0?t.contractors.map((e,t)=>(0,r.jsx)(j,{...e})):(0,r.jsx)("h1",{className:"text-center fonbold text-red-600 ",children:"No Contractors available"})})]}),(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(u.z,{onClick:p,title:"GET OTHER CONTRACTORS",className:"bg-green-700"}),(0,r.jsx)(u.z,{onClick:N,title:"REMOVE CURRENT CONTRACTOR",className:"text-red-200 bg-red-700"}),(0,r.jsx)(u.z,{title:"CANCEL",onClick:()=>{e((0,x.LG)())}}),(0,r.jsx)(u.z,{onClick:d,title:"UPDATE"})]})]})},j=e=>{let t=(0,s.CG)(e=>e.contractor),a=(0,s.TL)();return(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d.Z,{onChange:()=>{a((0,x.u1)({userId:e.id}))},checked:t.selectedToUpdateUserId===e.id}),(0,r.jsx)("h1",{children:e.name})]}),(0,r.jsx)("h1",{children:e.item})]})}},9142:function(e,t,a){"use strict";a.d(t,{V:function(){return p}});var r=a(5893),s=a(7294),n=a(1),c=a(1107),l=a(1175),i=a(6143);let o=async e=>await i.o.post("/operation/updateoperationmenue",e);var d=a(1664),u=a.n(d),x=a(66),h=a(1780),m=a(4828);let p=e=>{let{menues:t,isWagePageRequest:a=!1}=e,s=(0,x.TL)(),n=(0,x.CG)(e=>e.contractor),c=e=>{s((0,h.ve)({cid:e})),s((0,h.FI)(e))};return(0,r.jsxs)("div",{className:"w-full mb-8 overflow-hidden rounded-lg shadow-lg",children:[n.showUpdateContractorModal&&(0,r.jsx)(m.B,{}),(0,r.jsx)("div",{className:"w-full overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-md font-semibold tracking-wide text-left text-gray-900 bg-gray-100 uppercase border-b border-gray-600 whitespace-nowrap",children:[(0,r.jsx)("th",{className:"px-4 py-3 uppercase",children:"booking id"}),(0,r.jsx)("th",{className:"px-4 py-3 uppercase",children:"Categories"}),(0,r.jsx)("th",{className:"px-4 py-3 uppercase",children:"function date"}),(0,r.jsx)("th",{className:"px-4 py-3 uppercase",children:"Head Name"}),(0,r.jsx)("th",{className:"px-4 py-3 uppercase",children:"Head Mobile Number"}),(0,r.jsx)("th",{className:"px-4 py-3 uppercase",children:"Driver Name"}),(0,r.jsx)("th",{className:"px-4 py-3 uppercase",children:"Vehicle Number"}),(0,r.jsx)("th",{className:"px-4 py-3 uppercase",children:"cleaner"}),(0,r.jsx)("th",{className:"px-4 py-3 uppercase",children:"actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white whitespace-nowrap",children:t.map((e,t)=>{var s;return(0,r.jsxs)("tr",{className:"text-gray-700",children:[(0,r.jsx)("td",{className:"px-4 py-3 border",children:e.bookingId}),(0,r.jsx)("td",{className:"px-4 py-3 border space-y-4",children:null===(s=e.Categories)||void 0===s?void 0:s.map((e,t)=>{var a;return(0,r.jsxs)("div",{className:" grid gap-y-2 bg-gray-100 p-[1px]",children:[(0,r.jsxs)("span",{className:"font-bold text-lg underline underline-offset-4",children:[" ","Item: ",e.itemName]}),(0,r.jsxs)("span",{onClick:()=>{c(e.id)},className:"font-bold text-lg underline underline-offset-4 cursor-pointer hover:text-green-500",children:["Contractor: ",null===(a=e.contractor)||void 0===a?void 0:a.name]}),(0,r.jsxs)("span",{className:"font-bold text-lg underline underline-offset-4",children:[" ","Comment: ",e.comment]})]},t)})}),(0,r.jsx)("td",{className:"px-4 py-3 border",children:new Date(e.functionDate).toLocaleDateString()}),(0,r.jsx)(j,{isWagePageRequest:a,val:e})]},t)})})]})})]})},j=e=>{let{val:t,isWagePageRequest:a}=e,[i,d]=(0,s.useState)(!1),[x,h]=(0,s.useState)(t),m=e=>{let{name:t,value:a}=e.target;h({...x,[t]:a})},p=async()=>{try{await o({data:{cleaner:x.cleaner,driverName:x.driverName,headMobileNumber:x.headMobileNumber,headName:x.headName,vehicleNumber:x.vehicleNumber,id:x.id}}),alert("Updated Successfully!")}catch(t){let e=(0,n.Y)(t);alert(e)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{className:"px-4 py-3 border",children:i?(0,r.jsx)(l.Z,{name:"headName",value:x.headName,onChange:m}):x.headName}),(0,r.jsx)("td",{className:"px-4 py-3 border",children:i?(0,r.jsx)(l.Z,{name:"headMobileNumber",value:x.headMobileNumber,onChange:m}):x.headMobileNumber}),(0,r.jsx)("td",{className:"px-4 py-3 border",children:i?(0,r.jsx)(l.Z,{name:"driverName",value:x.driverName,onChange:m}):x.driverName}),(0,r.jsx)("td",{className:"px-4 py-3 border",children:i?(0,r.jsx)(l.Z,{name:"vehicleNumber",value:x.vehicleNumber,onChange:m}):x.vehicleNumber}),(0,r.jsx)("td",{className:"px-4 py-3 border",children:i?(0,r.jsx)(l.Z,{name:"cleaner",value:x.cleaner,onChange:m}):x.cleaner}),(0,r.jsx)("td",{className:"px-4 py-3 border space-x-3",children:a?(0,r.jsx)(c.z,{title:"Edit",onClick:()=>{window.location.href="/wage/edit/".concat(t.id)}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.z,{onClick:()=>{d(!i)},title:"Edit"}),(0,r.jsx)(c.z,{title:"Update",onClick:p,disabled:!i}),(0,r.jsx)(u(),{href:"/admin/menueprint/".concat(t.id),children:(0,r.jsx)(c.z,{title:"Print"})})]})})]})}},6846:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return p}});var r=a(5893),s=a(2923),n=a(1862),c=a(7294),l=a(1),i=a(1107);a(4105);var o=a(1175),d=a(9226),u=a(6259),x=a(2584),h=a(9142);let m=()=>{let[e,t]=(0,c.useState)(""),[a,m]=(0,c.useState)(""),[p,j]=(0,c.useState)(""),[N,g]=(0,c.useState)(""),[f,b]=(0,c.useState)(!0),[v,y]=(0,c.useState)([]),[C,w]=(0,c.useState)(""),[D,k]=(0,c.useState)(!1),S=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{if(t||e&&a||N||p){let r=await (0,n.hA)({search:t,startDate:e,endDate:a,departureDate:N,contractorName:p});y(r.data.menues)}else{let e=await (0,n.hA)({});y(e.data.menues)}}catch(e){return(0,l.Y)(e.message)}};(0,c.useEffect)(()=>{S()},[]);let T=()=>{try{let e=[];v.forEach(t=>{e.push({...t,serviceTime:new Date(t.serviceTime).toLocaleTimeString(),departureTime:new Date(t.departureTime).toLocaleTimeString(),functionDate:new Date(t.functionDate).toLocaleDateString(),departureDate:new Date(t.departureDate).toLocaleDateString()})}),(0,x.i)(e,"MENUE DATA")}catch(e){alert(e.message)}},E=()=>{k(!1)};return(0,r.jsxs)("div",{style:{backgroundImage:'url("/bg3.jpg")',backgroundAttachment:"fixed",backgroundSize:"cover"},className:"h-screen overflow-auto",children:[(0,r.jsx)(s.h,{}),(0,r.jsxs)("div",{className:"px-5 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(o.Z,{label:"Start Date",onChange:e=>{t(e.target.value)},type:"date",value:e}),(0,r.jsx)(o.Z,{label:"End Date",onChange:e=>{m(e.target.value)},type:"date",value:a})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(i.z,{title:"Search",onClick:()=>{S(C)}}),(0,r.jsx)(i.z,{title:"Download",onClick:T}),(0,r.jsx)(i.z,{title:"Reset",onClick:()=>{t(""),m(""),w(""),S()}})]}),(0,r.jsx)(h.V,{menues:v})]}),(0,r.jsx)(d.Z,{fullWidth:!0,maxWidth:"md",open:D,onClose:E,children:(0,r.jsx)(u.o,{allowEdit:f})})]})};var p=!0;t.default=m},2584:function(e,t,a){"use strict";a.d(t,{i:function(){return s}});var r=a(4105);function s(e,t){let a=r.P6.json_to_sheet(e),s=r.P6.book_new();r.P6.book_append_sheet(s,a,"students"),r.cW(s,{bookType:"xlsx",type:"buffer"}),r.cW(s,{bookType:"xlsx",type:"binary"}),r.NC(s,"".concat(t,".xlsx"))}},5103:function(){},2061:function(){}},function(e){e.O(0,[251,101,415,29,664,349,774,888,179],function(){return e(e.s=4716)}),_N_E=e.O()}]);