(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[953],{2091:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/report",function(){return s(2144)}])},1107:function(e,a,s){"use strict";s.d(a,{z:function(){return r}});var t=s(5893);s(7294);let r=e=>{let{title:a,className:s,type:r,children:l,...n}=e;return(0,t.jsxs)("button",{...n,type:r||"button",className:"shadow-md bg-primary py-2 px-4 rounded-md text-sm font-semibold outline-none text-white ".concat(s),children:[a,l]})}},2923:function(e,a,s){"use strict";s.d(a,{h:function(){return l}});var t=s(5893),r=s(3299);s(7294);let l=e=>{let{onlyLogo:a,className:s}=e,{data:l}=(0,r.useSession)();return(0,t.jsxs)("div",{className:s,children:[(0,t.jsxs)("div",{className:"flex items-center justify-evenly cursor-pointer uppercase ",children:[(0,t.jsx)("div",{className:"flex items-center flex-wrap gap-5",children:!a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h1",{onClick:()=>{window.location.href="/"},className:"text-white hover:text-primary font-bold",children:"Home"}),(0,t.jsx)("h1",{onClick:()=>{window.location.href="/admin/createusers"},className:"text-white hover:text-primary font-bold",children:"Create Roles"}),(0,t.jsx)("h1",{onClick:()=>{window.location.href="/admin/report"},className:"text-white hover:text-primary font-bold",children:"Report"}),(0,t.jsx)("h1",{onClick:()=>{window.location.href="/booking"},className:"text-white hover:text-primary font-bold",children:"Bookings"})]})}),(0,t.jsx)("div",{className:"",onClick:()=>{window.location.href="/order"},children:(0,t.jsx)("img",{src:"/logo.png",className:"w-[200px] h-[200px] object-contain"})}),(0,t.jsx)("div",{className:"flex items-center flex-wrap gap-5",children:!a&&(0,t.jsxs)(t.Fragment,{children:[(null==l?void 0:l.user.role)==="admin"&&(0,t.jsx)("h1",{onClick:()=>{window.location.href="/admin/adminpage"},className:"text-white hover:text-primary font-bold",children:"Admin"}),(0,t.jsx)("h1",{onClick:()=>{window.location.href="/wage"},className:"text-white hover:text-primary font-bold",children:"Wage Page"}),(0,t.jsx)("h1",{onClick:()=>{window.location.href="/operation"},className:"text-white hover:text-primary font-bold",children:"Operation"}),(0,t.jsx)("h1",{className:" font-bold text-white hover:text-primary",onClick:()=>{(0,r.signOut)()},children:"logout"})]})})]}),(0,t.jsxs)("div",{className:"flex items-center flex-col text-white",children:[(0,t.jsx)("h2",{className:" font-semibold text-3xl ",children:"Reserve Menu & Catering"}),(0,t.jsx)("h5",{className:" font-semibold text-xl ",children:"XYZ place Pin: 1234567"}),!a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"abc@gmail.com"}),(0,t.jsx)("span",{children:"Contact: 1234567"})]})]})]})}},1175:function(e,a,s){"use strict";var t=s(5893);s(7294);let r=e=>{let{type:a="text",label:s,labelClassName:r,className:l,endIcon:n,...c}=e;return(0,t.jsxs)("div",{className:"grid text-start gap-y-1 ".concat(l),children:[s&&(0,t.jsx)("label",{className:"text-sm font-semibold text-white ".concat(r),children:s}),(0,t.jsxs)("div",{className:" flex items-center border border-gray-300 rounded-md  focus:border-primary shadow-md bg-white ",children:[(0,t.jsx)("input",{...c,type:a,className:" w-full outline-none   p-2"}),n&&n]})]})};a.Z=r},2144:function(e,a,s){"use strict";s.r(a),s.d(a,{__N_SSP:function(){return _},default:function(){return E}});var t=s(5893),r=s(2923),l=s(7294),n=s(1),c=s(1107),i=s(1175),d=s(2584);let o=e=>{let{menues:a}=e;return(0,t.jsx)("div",{className:"w-full mb-8 overflow-hidden rounded-lg shadow-lg",children:(0,t.jsx)("div",{className:"w-full overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"text-md font-semibold tracking-wide text-left text-gray-900 bg-gray-100 uppercase border-b border-gray-600 whitespace-nowrap",children:[(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"booking id"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"function"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase whitespace-nowrap",children:"name"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase whitespace-nowrap",children:"created at"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"function date"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"mobile"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"Service Time"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"venue"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"Departure Date"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"Departure Time"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"PAX"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"Special Instruction"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"Head Name"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"Head Mobile Number"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"Driver Name"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"Vehicle Number"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"words"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"cleaner"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"booked By"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"booker Mobile Number"})]})}),(0,t.jsx)("tbody",{className:"bg-white whitespace-nowrap",children:a.map((e,a)=>(0,t.jsxs)("tr",{className:"text-gray-700",children:[(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.bookingId}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.function}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.name}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.createdAt?"".concat(new Date(e.createdAt).toLocaleDateString()):"null"}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:new Date(e.functionDate).toLocaleDateString()}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.mobile}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:new Date(e.serviceTime).toTimeString()}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.venue}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:new Date(e.departureDate).toLocaleDateString()}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:new Date(e.departureTime).toTimeString()}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.PAX}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.specialInstruction}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.headName}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.headMobileNumber}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.driverName}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.vehicleNumber}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.words}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.cleaner}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.bookedBy}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.bookerMobileNumber})]},a))})]})})})};var x=s(6143);let p=async e=>x.o.post("/report/totalbookings",e),h=async e=>x.o.post("/report/tofromdatewages",e),m=async e=>await x.o.post("/contractor/search",e),u=()=>{let[e,a]=(0,l.useState)(""),[s,r]=(0,l.useState)(""),[x,h]=(0,l.useState)([]),[m,u]=(0,l.useState)(""),[j,b]=(0,l.useState)(0),[N,g]=(0,l.useState)([]),y=async()=>{if(!e||!s)return alert("select start and end date");try{let a=await p({startdate:e,enddate:s});g(a.data.menues)}catch(e){return(0,n.Y)(e.message)}},v=()=>{try{(0,d.i)(N,"FROM-TO DATE MENUES")}catch(e){alert(e.message)}};return(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"px-5 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(i.Z,{labelClassName:"!text-black",label:"Booking From",onChange:e=>{a(e.target.value)},type:"date",value:e}),(0,t.jsx)(i.Z,{labelClassName:"!text-black",label:"Booking To",onChange:e=>{r(e.target.value)},type:"date",value:s})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.z,{title:"Search...",onClick:()=>{y()}}),(0,t.jsx)(c.z,{title:"Download",onClick:v}),(0,t.jsx)(c.z,{title:"Reset",onClick:()=>{a(""),r(""),g([])}})]}),(0,t.jsx)("div",{children:(0,t.jsx)(o,{menues:N})})]})})};var j=s(7357),b=s(1703),N=s(44);let g=e=>{let a=0;return e.Categories.forEach(e=>{var s,t;(null===(s=e.contractor)||void 0===s?void 0:s.wage)!==void 0&&(a+=Number(null===(t=e.contractor)||void 0===t?void 0:t.wage))}),a},y=e=>{let a=0;return e.Categories.forEach(e=>{null!==e.finalWage&&(a+=Number(e.finalWage))}),a},v=e=>{let{meunues:a}=e;return(0,t.jsx)("div",{className:"w-full mb-8 overflow-hidden rounded-lg shadow-lg",children:(0,t.jsx)("div",{className:"w-full overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"text-md font-semibold tracking-wide text-left text-gray-900 bg-gray-100 uppercase border-b border-gray-600 whitespace-nowrap",children:[(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"booking id"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"venue"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"total wages"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"final wages"})]})}),(0,t.jsx)("tbody",{className:"bg-white whitespace-nowrap",children:a.map((e,a)=>(0,t.jsxs)("tr",{className:"text-gray-700",children:[(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.bookingId}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.venue}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:g(e)}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:y(e)})]},a))})]})})})},w=()=>{let[e,a]=(0,l.useState)(""),[s,r]=(0,l.useState)(""),[o,x]=(0,l.useState)([]),[p,m]=(0,l.useState)(""),[u,j]=(0,l.useState)(0),b=async()=>{if(!e||!s)return alert("select start and end date");try{let a=await h({startdate:e,enddate:s}),{menues:t,totalwages:r,finalwages:l}=a.data;x(t),console.log({menues:t,totalwages:r,finalwages:l})}catch(a){let e=(0,n.Y)(a.message);alert(e)}},N=()=>{try{let a=[];o.forEach(t=>{a.push({START_DATE:e,END_DATE:s,BOOKING_ID:t.bookingId,VENUE:t.venue,TOTAL_WAGES:g(t),FINAL_WAGES:y(t)})}),(0,d.i)(a,"FROM-TO DATE WAGE")}catch(e){alert(e.message)}};return(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"px-5 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(i.Z,{labelClassName:"!text-black",label:"Booking From",onChange:e=>{a(e.target.value)},type:"date",value:e}),(0,t.jsx)(i.Z,{labelClassName:"!text-black",label:"Booking To",onChange:e=>{r(e.target.value)},type:"date",value:s})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.z,{title:"Search",onClick:()=>{b()}}),(0,t.jsx)(c.z,{title:"Download",onClick:N}),(0,t.jsx)(c.z,{title:"Reset",onClick:()=>{a(""),r(""),m(""),x([])}})]}),(0,t.jsx)("div",{children:(0,t.jsx)(v,{meunues:o})})]})})},f=e=>{let{meunues:a}=e;return(0,t.jsx)("div",{className:"w-full mb-8 overflow-hidden rounded-lg shadow-lg",children:(0,t.jsx)("div",{className:"w-full overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"text-md font-semibold tracking-wide text-left text-gray-900 bg-gray-100 uppercase border-b border-gray-600 whitespace-nowrap",children:[(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"booking id"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"contractor name"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"total wages"}),(0,t.jsx)("th",{className:"px-4 py-3 uppercase",children:"final wages"})]})}),(0,t.jsx)("tbody",{className:"bg-white whitespace-nowrap",children:a.map((e,a)=>{var s,r;return(0,t.jsxs)("tr",{className:"text-gray-700",children:[(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.menue.bookingId}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:null===(s=e.contractor)||void 0===s?void 0:s.name}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:null===(r=e.contractor)||void 0===r?void 0:r.wage}),(0,t.jsx)("td",{className:"px-4 py-3 border",children:e.finalWage})]},a)})})]})})})},k=()=>{let[e,a]=(0,l.useState)(""),[s,r]=(0,l.useState)(""),[o,x]=(0,l.useState)([]),[p,h]=(0,l.useState)(""),[u,j]=(0,l.useState)(0),b=async()=>{if(!p)return alert("select start and end date");try{let e=await m({search:p});console.log({data:e.data.menues}),x(e.data.menues)}catch(e){return(0,n.Y)(e.message)}},N=()=>{try{let e=[];o.forEach(a=>{var s,t;e.push({Booking_id:a.menue.bookingId,Contractor_Name:null===(s=a.contractor)||void 0===s?void 0:s.name,Total_Wages:null===(t=a.contractor)||void 0===t?void 0:t.wage,Final_Wages:a.finalWage})}),(0,d.i)(e,"FROM-TO DATE MENUES")}catch(e){alert(e.message)}};return(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"px-5 space-y-2",children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)(i.Z,{value:p,onChange:e=>{h(e.target.value)}})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.z,{title:"Search",onClick:()=>{b()}}),(0,t.jsx)(c.z,{title:"Download",onClick:N}),(0,t.jsx)(c.z,{title:"Reset",onClick:()=>{h(""),x([])}})]}),(0,t.jsx)("div",{children:(0,t.jsx)(f,{meunues:o})})]})})};function C(e){let{children:a,value:s,index:r,...l}=e;return(0,t.jsx)("div",{role:"tabpanel",hidden:s!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r),...l,children:s===r&&(0,t.jsx)(j.Z,{sx:{p:3},children:(0,t.jsx)("div",{children:a})})})}function S(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}let T=()=>{let[e,a]=l.useState(0),s=(e,s)=>{a(s)};return(0,t.jsxs)("div",{style:{backgroundImage:'url("/bg3.jpg")',backgroundAttachment:"fixed",backgroundSize:"cover"},className:"h-screen overflow-auto",children:[(0,t.jsx)(r.h,{}),(0,t.jsxs)(j.Z,{sx:{width:"60%",bgcolor:"white",marginX:"auto"},children:[(0,t.jsx)(j.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,t.jsxs)(b.Z,{value:e,onChange:s,"aria-label":"basic tabs example",children:[(0,t.jsx)(N.Z,{label:"FROM-TO DATE",...S(0)}),(0,t.jsx)(N.Z,{label:"FROM-TO DATE WAGE",...S(1)}),(0,t.jsx)(N.Z,{label:"SEARCH CONTRACTOR",...S(2)})]})}),(0,t.jsx)(C,{value:e,index:0,children:(0,t.jsx)(u,{})}),(0,t.jsx)(C,{value:e,index:1,children:(0,t.jsx)(w,{})}),(0,t.jsx)(C,{value:e,index:2,children:(0,t.jsx)(k,{})})]})]})};var _=!0,E=T},2584:function(e,a,s){"use strict";s.d(a,{i:function(){return r}});var t=s(4105);function r(e,a){let s=t.P6.json_to_sheet(e),r=t.P6.book_new();t.P6.book_append_sheet(r,s,"students"),t.cW(r,{bookType:"xlsx",type:"buffer"}),t.cW(r,{bookType:"xlsx",type:"binary"}),t.NC(r,"".concat(a,".xlsx"))}},1:function(e,a,s){"use strict";s.d(a,{Y:function(){return t}});let t=e=>{var a,s,t,r;return(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.msg)?null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.msg:e.message}},5103:function(){},2061:function(){}},function(e){e.O(0,[251,101,865,774,888,179],function(){return e(e.s=2091)}),_N_E=e.O()}]);