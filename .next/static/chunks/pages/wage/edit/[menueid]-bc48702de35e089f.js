(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[623],{9884:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/wage/edit/[menueid]",function(){return r(3369)}])},1107:function(e,s,r){"use strict";r.d(s,{z:function(){return a}});var l=r(5893);r(7294);let a=e=>{let{title:s,className:r,type:a,children:t,...c}=e;return(0,l.jsxs)("button",{...c,type:a||"button",className:"shadow-md bg-primary py-2 px-4 rounded-md text-sm font-semibold outline-none text-white ".concat(r),children:[s,t]})}},2923:function(e,s,r){"use strict";r.d(s,{h:function(){return t}});var l=r(5893),a=r(3299);r(7294);let t=e=>{let{onlyLogo:s,className:r}=e,{data:t}=(0,a.useSession)();return(0,l.jsxs)("div",{className:r,children:[(0,l.jsxs)("div",{className:"flex items-center justify-evenly cursor-pointer uppercase ",children:[(0,l.jsx)("div",{className:"flex items-center flex-wrap gap-5",children:!s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{onClick:()=>{window.location.href="/"},className:"text-white hover:text-primary font-bold",children:"Home"}),(0,l.jsx)("h1",{onClick:()=>{window.location.href="/admin/createusers"},className:"text-white hover:text-primary font-bold",children:"Create Roles"}),(0,l.jsx)("h1",{onClick:()=>{window.location.href="/admin/report"},className:"text-white hover:text-primary font-bold",children:"Report"}),(0,l.jsx)("h1",{onClick:()=>{window.location.href="/booking"},className:"text-white hover:text-primary font-bold",children:"Bookings"})]})}),(0,l.jsx)("div",{className:"",onClick:()=>{window.location.href="/order"},children:(0,l.jsx)("img",{src:"/logo.png",className:"w-[200px] h-[200px] object-contain"})}),(0,l.jsx)("div",{className:"flex items-center flex-wrap gap-5",children:!s&&(0,l.jsxs)(l.Fragment,{children:[(null==t?void 0:t.user.role)==="admin"&&(0,l.jsx)("h1",{onClick:()=>{window.location.href="/admin/adminpage"},className:"text-white hover:text-primary font-bold",children:"Admin"}),(0,l.jsx)("h1",{onClick:()=>{window.location.href="/wage"},className:"text-white hover:text-primary font-bold",children:"Wage Page"}),(0,l.jsx)("h1",{onClick:()=>{window.location.href="/operation"},className:"text-white hover:text-primary font-bold",children:"Operation"}),(0,l.jsx)("h1",{className:" font-bold text-white hover:text-primary",onClick:()=>{(0,a.signOut)()},children:"logout"})]})})]}),(0,l.jsxs)("div",{className:"flex items-center flex-col text-white",children:[(0,l.jsx)("h2",{className:" font-semibold text-3xl ",children:"Reserve Menu & Catering"}),(0,l.jsx)("h5",{className:" font-semibold text-xl ",children:"XYZ place Pin: 1234567"}),!s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{children:"abc@gmail.com"}),(0,l.jsx)("span",{children:"Contact: 1234567"})]})]})]})}},1175:function(e,s,r){"use strict";var l=r(5893);r(7294);let a=e=>{let{type:s="text",label:r,labelClassName:a,className:t,endIcon:c,...n}=e;return(0,l.jsxs)("div",{className:"grid text-start gap-y-1 ".concat(t),children:[r&&(0,l.jsx)("label",{className:"text-sm font-semibold text-white ".concat(a),children:r}),(0,l.jsxs)("div",{className:" flex items-center border border-gray-300 rounded-md  focus:border-primary shadow-md bg-white ",children:[(0,l.jsx)("input",{...n,type:s,className:" w-full outline-none   p-2"}),c&&c]})]})};s.Z=a},4460:function(e,s,r){"use strict";r.d(s,{P:function(){return a}});var l=r(5893);r(7294);let a=e=>{let{options:s,value:r,className:a,label:t,labelClassName:c,...n}=e;return(0,l.jsxs)("div",{className:"grid text-start w-[150px]",children:[t&&(0,l.jsx)("label",{className:"text-sm font-semibold text-white ".concat(c),children:t}),(0,l.jsx)("select",{...n,value:r,className:"shadow-md w-full border border-gray-300 rounded-md focus:border-primary p-2  outline-none ".concat(a),children:s.map((e,s)=>(0,l.jsx)("option",{value:e.value,children:e.content},s))})]})}},7089:function(e,s,r){"use strict";r.d(s,{q:function(){return t}});var l=r(5893);r(7294);let a=e=>{let{children:s,className:r}=e;return(0,l.jsx)("div",{className:"text-light font-bold ".concat(r),children:s})},t=e=>{let{menue:s}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center justify-evenly border-b-2 border-b-black",children:[(0,l.jsx)(a,{className:"!text-xl",children:"Function"}),(0,l.jsx)(a,{className:"!text-xl",children:s.function})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 ",children:[(0,l.jsxs)("div",{className:"border-r-2 border-r-black border-l-2 border-l-black",children:[(0,l.jsxs)("div",{className:"p-1 space-y-3",children:[(0,l.jsxs)("div",{className:"flex  space-x-4",children:[(0,l.jsx)(a,{children:"Name:- "}),(0,l.jsx)(a,{children:s.name})]}),(0,l.jsxs)("div",{className:"flex  space-x-4",children:[(0,l.jsx)(a,{children:"Mobile:- "}),(0,l.jsx)(a,{children:s.mobile})]}),(0,l.jsxs)("div",{className:"flex  space-x-4",children:[(0,l.jsx)(a,{children:"Venue:- "}),(0,l.jsx)(a,{children:s.venue})]})]}),(0,l.jsx)("div",{className:"flex items-center justify-end border-t-2 p-1  border-t-black ",children:(0,l.jsxs)(a,{children:["Pax:- ",s.PAX]})})]}),(0,l.jsx)("div",{className:"border-r-2  ",children:(0,l.jsxs)("div",{className:"p-1  space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(a,{children:"Function Date:- "}),(0,l.jsx)(a,{children:new Date(s.functionDate).toLocaleDateString()})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(a,{children:"Service Time:- "}),(0,l.jsx)(a,{children:new Date(s.serviceTime).toLocaleTimeString()})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(a,{children:"Departure Date:- "}),(0,l.jsx)(a,{children:new Date(s.departureDate).toLocaleDateString()})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(a,{children:"Departure Time:- "}),(0,l.jsx)(a,{children:new Date(s.departureTime).toLocaleDateString()})]})]})})]}),(0,l.jsx)("div",{className:"border-t-2 border-t-black border-l-2 border-l-black",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 ",children:[(0,l.jsxs)("div",{className:"border-r-2 border-r-black",children:[(0,l.jsx)("div",{className:"border-b-2 border-b-black p-1 ",children:(0,l.jsxs)(a,{children:["Special Instructions:- ",s.specialInstruction]})}),(0,l.jsx)("div",{className:"",children:(0,l.jsxs)("div",{className:"flex ",children:[(0,l.jsxs)("div",{className:"border-r-2    border-black h-[120px]",children:[(0,l.jsx)(a,{children:"ONION:-"}),(0,l.jsx)(a,{children:"GARLIC:-"})]}),(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(a,{children:!0===s.onion?"True":"False"}),(0,l.jsx)(a,{children:!0===s.garlic?"True":"False"})]})]})})]}),(0,l.jsxs)("div",{className:"p-1  space-y-4 border-r-2 border-r-black",children:[(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsx)(a,{children:"Head Name:- "}),(0,l.jsx)(a,{children:s.headName})]}),(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsx)(a,{children:"Mobile Number:- "}),(0,l.jsx)(a,{children:s.headMobileNumber})]}),(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsx)(a,{children:"Driver Name:- "}),(0,l.jsx)(a,{children:s.driverName})]}),(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsx)(a,{children:"Vehicle Number:- "}),(0,l.jsx)(a,{children:s.vehicleNumber})]})]})]})})]})}},3369:function(e,s,r){"use strict";r.r(s),r.d(s,{__N_SSP:function(){return v},default:function(){return f}});var l=r(5893),a=r(1862),t=r(4105);let c=e=>{let{callback:s,file:r}=e;if(r){let e=new FileReader;e.readAsArrayBuffer(r),e.onload=e=>{var r;let l=null===(r=e.target)||void 0===r?void 0:r.result,a=t.ij(l,{type:"array"}),c=a.SheetNames[0],n=a.Sheets[c],i=t.P6.sheet_to_json(n);s(i)}}};var n=r(1),i=r(7294),d=r(1107),o=r(2923),x=r(1175),u=r(4460),m=r(6143);let h=async e=>await m.o.post("/places/create",e),p=async()=>await m.o.get("/places/getall");var b=r(7089);let j=e=>{let s,r,t,{menue:m}=e,[j,N]=(0,i.useState)(!1),[v,f]=(0,i.useState)([]),[g,w]=(0,i.useState)(m),y=(e,s,r)=>{let l=[...g.Categories].map((l,a)=>a===e?{...l,[r]:s}:l);w(e=>({...e,Categories:l}))},k=()=>{let e=0;return g.Categories.forEach(s=>{if(void 0!==s.minus){var r,l;e+=Number(null===(r=s.contractor)||void 0===r?void 0:r.wage)*Number(s.placevalue)+Number(s.plus)-Number(s.minus)?Number(null===(l=s.contractor)||void 0===l?void 0:l.wage)*Number(s.placevalue)+Number(s.plus)-Number(s.minus):0}}),e},C=async()=>{try{await (0,a.CV)({categories:g.Categories}),alert("updated successfully!")}catch(s){let e=(0,n.Y)(s);alert(e)}},D=async e=>{try{await h({places:e}),alert("uploaded successfull!")}catch(s){let e=(0,n.Y)(s);alert(e)}f(e)},_=async()=>{try{let e=await p();f(e.data.places)}catch(s){let e=(0,n.Y)(s);alert(e)}};return i.useEffect(()=>{_()},[]),i.useEffect(()=>{j&&window.print()},[j]),(0,l.jsxs)("div",{children:[!j&&(0,l.jsx)(o.h,{className:"bg-sky-500"}),(0,l.jsx)(b.q,{menue:m}),!j&&(0,l.jsx)("div",{className:"p-4 bg-gray-100",children:(0,l.jsx)(x.Z,{label:"Upload Places",labelClassName:"!text-black",type:"file",onChange:e=>{if(!e.target.files)return;let s=e.target.files[0];c({callback:D,file:s}),e.target.value=""}})}),(0,l.jsxs)("div",{className:"w-full mb-8 overflow-hidden bg-white",children:[(0,l.jsx)("div",{className:"w-full overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"text-md font-semibold tracking-wide text-left text-gray-900 uppercase border-b border-2 border-black",children:[(0,l.jsx)("th",{className:"px-4 py-3 uppercase  border-2 border-black  text-center",children:"s.no"}),(0,l.jsx)("th",{className:"px-4 py-3 uppercase  border-2 border-black  text-center",children:"NAME OF staff"}),(0,l.jsx)("th",{className:"px-4 py-3 uppercase  border-2 border-black  text-center",children:"wage"}),(0,l.jsx)("th",{className:"px-4 py-3 uppercase  border-2 border-black  text-center",children:"value of place"}),(0,l.jsxs)("th",{className:"px-4 py-3 uppercase  border-2 border-black  text-center",children:["Bonus",(0,l.jsxs)("tr",{className:"flex justify-between text-md font-semibold tracking-wide text-left text-gray-900  uppercase ",children:[(0,l.jsx)("th",{className:"px-4 py-3 uppercase text-center",children:"+"}),(0,l.jsx)("th",{className:"px-4 py-3 uppercase text-center",children:"-"})]})]}),(0,l.jsx)("th",{className:"px-4 py-3 uppercase text-center",children:"TOTAL"})]})}),(0,l.jsxs)("tbody",{className:"bg-white font-semibold",children:[g.Categories.map((e,s)=>{var r,a,t;return(0,l.jsxs)("tr",{className:"text-gray-700",children:[(0,l.jsx)("td",{className:"px-1 py-3 border-2 border-black  text-center",children:s+1}),(0,l.jsx)("td",{className:"px-1 py-3 border-2 border-black  ",children:null===(r=e.contractor)||void 0===r?void 0:r.name}),(0,l.jsx)("td",{className:"px-1 py-3 border-2 border-black  text-center",children:(null===(a=e.contractor)||void 0===a?void 0:a.wage)?e.contractor.wage:"0"}),(0,l.jsxs)("td",{className:"px-1 py-3 border-2 border-black  text-center ",children:[(0,l.jsx)("div",{className:"w-full",children:j?null!==e.placevalue?e.placevalue:"0":(0,l.jsx)(x.Z,{className:"!w-[100px] ",type:"number",value:null!==e.placevalue?e.placevalue:"0"})}),(0,l.jsx)("div",{className:"flex items-center space-x-3 mt-4",children:!j&&(0,l.jsx)(u.P,{value:null!==e.placevalue?e.placevalue:"",onChange:e=>{y(s,e.target.value,"placevalue")},label:"Select Place",labelClassName:"!text-black",className:"!text-black !w-[150px]",options:[...v.map(e=>({content:"".concat(e.name,": ").concat(e.value),value:e.value}))]})})]}),(0,l.jsx)("td",{className:"px-4 py-3 border-2 border-black  text-center",children:(0,l.jsxs)("tr",{className:"text-gray-700 flex justify-between",children:[(0,l.jsx)("td",{className:"px-4 py-3  text-center",children:j?null!==e.plus?e.plus:"0":(0,l.jsx)(x.Z,{type:"number",onChange:e=>{y(s,e.target.value,"plus")},className:"!w-[100px] ",value:null!==e.plus?e.plus:"0"})}),(0,l.jsx)("td",{className:"px-4 py-3  text-center",children:j?null!==e.minus?e.minus:"0":(0,l.jsx)(x.Z,{type:"number",onChange:e=>{y(s,e.target.value,"minus")},className:"!w-[100px] ",value:null!==e.minus?e.minus:"0"})})]})}),(0,l.jsx)("td",{className:"px-4 py-3 border-2 border-black  text-center",children:Number(null===(t=e.contractor)||void 0===t?void 0:t.wage)*Number(e.placevalue)+Number(e.plus)-Number(e.minus)})]})}),(0,l.jsxs)("tr",{className:"text-gray-700 font-bold",children:[(0,l.jsx)("td",{className:"px-4 py-3 border-2 border-black  text-center"}),(0,l.jsx)("td",{className:"px-1 py-3 border-2 border-black  font-bold",children:"Total value:"}),(0,l.jsx)("td",{className:"px-4 py-3 border-2 border-black  text-center",children:(s=0,g.Categories.forEach(e=>{var r;(null===(r=e.contractor)||void 0===r?void 0:r.wage)!==void 0&&(s+=e.contractor.wage)}),s)}),(0,l.jsx)("td",{className:"px-4 py-3 border-2 border-black  text-center"}),(0,l.jsx)("td",{className:"px-4 py-3 border-2 border-black  text-center",children:(0,l.jsxs)("tr",{className:"text-gray-700 flex justify-between",children:[(0,l.jsx)("td",{className:"px-4 py-3  text-center",children:(r=0,g.Categories.forEach(e=>{void 0!==e.plus&&(r+=Math.abs(Number(e.plus)))}),r)}),(0,l.jsx)("td",{className:"px-4 py-3  text-center",children:(t=0,g.Categories.forEach(e=>{void 0!==e.minus&&(t+=Math.abs(Number(e.minus)))}),t)})]})}),(0,l.jsx)("td",{className:"px-4 py-3 border-2 border-black  text-center",children:k()})]})]})]})}),(0,l.jsxs)("h1",{className:"text-end font-semibold text-lg p-3 underline underline-offset-4",children:["Total payable amount : ",k()]}),(0,l.jsx)("h1",{className:"text-xl text-center tracking-tight mb-10",children:"Thank You \uD83D\uDC4F"})]}),!j&&(0,l.jsxs)("div",{className:"w-full p-2",children:[(0,l.jsx)(d.z,{className:" w-full m-auto",title:"UPDATE",onClick:C}),(0,l.jsx)(d.z,{className:"mt-4 w-full m-auto",title:"PRINT",onClick:async()=>{N(!0)}})]})]})},N=e=>{let{id:s}=e,[r,t]=(0,i.useState)(null),c=async()=>{try{let e=await (0,a.yo)(s);t(e.data.menue)}catch(s){let e=(0,n.Y)(s);alert(e)}};return i.useEffect(()=>{s&&c()},[s]),(0,l.jsx)("div",{children:r?(0,l.jsx)(j,{menue:r}):(0,l.jsx)("div",{children:"loading..."})})};var v=!0,f=N},1:function(e,s,r){"use strict";r.d(s,{Y:function(){return l}});let l=e=>{var s,r,l,a;return(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.msg)?null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(a=l.data)||void 0===a?void 0:a.msg:e.message}},5103:function(){},2061:function(){}},function(e){e.O(0,[251,774,888,179],function(){return e(e.s=9884)}),_N_E=e.O()}]);